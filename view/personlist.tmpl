{IndexLetters $persons "lastname"}

<table class="list personlist">
  <tr class="header">
    <th scope="col" class="icon">&nbsp;</th>
    <th scope="col" class="lastname">{Label user.user.attr.lastname}</th>
    <th scope="col" class="firstname">{Label user.user.attr.firstname}</th>
    <th scope="col" class="email">{Label contact.email}</th>
    <th scope="col" class="company">{Label contact.company}</th>
    <th scope="col" class="last actions">&nbsp;</th>
  </tr>
{paging data=$persons item="person" update="contact/person/list" size="5" name="persons" offset=$offset total=$total}

	{if $.foreach.persons.first}
	<tr>
	 <td colspan="6">
	 	<div class="paging">
	 		<div class="view">{$.foreach.persons.total}/{$.foreach.persons.paging.rows}</div>
	 		<div class="pages">
	 			{for i 0 $.foreach.persons.paging.pages-1}
	 			<div class="page" onclick="{str_replace('#OFFSET#', $i*5, $.foreach.persons.paging.link)}">{$i+1}</div>
	 			{/for}
	 		</div>
	 		<div class="nav">
		 		<div class="back">&lt;</div>
		 		<div class="next">&gt;</div>
	 		</div>
	 	</div>
	 </td>
	</tr>
	{/if}

  <tr class="{cycle values="odd,even"}">
  	<td class="icon"><a name="index_{upper $person.lastname[0]}"></a></td>
    <td class="lastname">{$person.lastname}</td>
    <td class="firstname">{$person.firstname}</td>
    <td class="email">{$person.email}</td>
    <td class="company">{$person.company}</td>
    <td class="actions">
    	<div title="{Label contact.person.tooltip.showInfo}" class="icon info" onclick="Todoyu.Ext.contact.Person.show({$person.id})"></div>
    	{restrict 'contact' 'person:edit'}<div title="{Label contact.person.tooltip.edit}" class="icon edit" onclick="Todoyu.Ext.contact.Person.edit({$person.id})"></div>{/restrict}
    	{restrict 'contact' 'person:delete'}<div title="{Label core.deleteRecord}" class="icon delete" onclick="Todoyu.Ext.contact.Person.remove({$person.id})"></div>{/restrict}
    	<div title="{Label contact.person.tooltip.edituser}" class="icon user" onclick="Todoyu.Ext.contact.Person.editUserRecord({$person.id})"></div>
    </td>
  </tr>
{/paging}
</table>