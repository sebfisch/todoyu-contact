<div id="contact-details" class="company">
	<h1 class="headerLine">
		<span class="title">{$title}</span>
		<span class="rgt"></span>
	</h1>

	<div class="infoBoxOuter">
		{* ------------ Main company data (name, primary email, image, etc.) ------------ *}
		<div class="infoBox main-company-data">
			<h4>{Label LLL:contact.ext.company.maincompanydata}</h4>
			<div class="content overflow">
				<div class="left image">{companyImage $id}</div>
				<dl>
					<dd>{$title}</dd>
				</dl>
			</div>
		</div>
	
		{* ------------ Dynamic contact info types (emails, phone numbers, etc.) ------------ *}
		{if $contactinfo}
			<div class="infoBox contact-info">
				<h4>{Label LLL:contact.ext.contactinfo}</h4>
				<div class="content overflow">
					<dl>
						{foreach $contactinfo numCi ciData}
							{if isContactinfotypeSeeAllowed('company', $id, $ciData.id_contactinfotype)}
								<dt>{labelContactinfotype $ciData.id_contactinfotype}:</dt>
								<dd>
									{if $ciData.infotype_category == constant(CONTACT_INFOTYPE_CATEGORY_EMAIL)}
										<a href="mailto:{$title}%20%3C{$ciData.info}%3E">{htmlencode wordwrap($ciData.info 30 cut=false)}</a>
									{else}
										{htmlencode wordwrap($ciData.info 30 cut=false)}
									{/if}
								</dd>
							{/if}
						{/foreach}
					</dl>
				</div>
			</div>
		{/if}
		
		{* ------------ Addresses ------------ *}
		{foreach $address numAddr addressType}
			{if isAddressTypeSeeAllowed('company', $id, $addressType.id_addresstype)}
				<div class="infoBox addressPart">
					<h4>{addressType $addressType.id_addresstype}</h4>
					<div class="content overflow address">
						{$addressType.street}
						{if strlen($addressType.postbox)>0}
							{Label contact.ext.address.attr.postbox}: {htmlencode wordwrap($addressType.postbox 30 cut=true)}<br />
						{/if}
						{$addressType.zip} {$addressType.city}<br />
						{countryName $addressType.id_country} <br />
						{$addressType.comment}
					</div>
				</div>
			{/if}
		{/foreach}
	
		{* ------------ Company employees with job type and work address ------------ *}
		{foreach $person numEmployee pers}
			{if isPersonSeeAllowed($pers.id)}
				<div class="infoBox employeePart">
					<h4>{Label LLL:contact.ext.company.attr.person}</h4>
					<div class="content overflow address">
						<dl>
							<dd><a href="?ext=contact&amp;controller=person&amp;action=detail&amp;person={$pers.id}">{personLabel $pers.id 'employee' $id}</a></dd>
							<dd>{$pers.jobtype.title}</dd>
							{if $pers.id_workaddress > 0}<dd>{$pers.workaddress.street}, {$pers.workaddress.zip} {$pers.workaddress.city}, {countryName $pers.workaddress.id_country}</dd>{/if}
						</dl>
					</div>
				</div>
			{/if}
		{/foreach}
	
		{* ------------ Additional infos (date of entry) ------------ *}

		<div class="infoBox others">
			<h4>{Label LLL:contact.ext.other}</h4>
				<div class="content overflow address">
				<dl>
					{if $date_enter > 0 && isInternal()}
						<dt>{Label LLL:contact.ext.company.attr.date_enter}:</dt><dd>{dateFormat $date_enter "date"}</dd>
					{/if}
					{if allowed('contact', 'company:seeComment')}
						<dt>{Label LLL:contact.ext.company.attr.comment}:</dt><dd>{$comment|default:"-"}</dd>
					{/if}
				</dl>
			</div>
		</div>

	
		{* ------------ Hooked content ------------ *}
		{$hookedContent}
	
		{* ------------ Actions panel (edit, delete, close) ------------ *}
		<div class="actions">
			{if isCompanyEditAllowed($id)}
				{Button label='contact.ext.company.edit' onclick='Todoyu.Ext.contact.Company.edit($id)' class='buttonCompanyEdit' id='company-edit' title='LLL:contact.ext.company.edit'}
			{/if}
			{if isCompanyDeleteAllowed($id)}
				{Button label='contact.ext.company.delete' onclick='Todoyu.Ext.contact.Company.remove($id)' class='buttonCompanyDelete' id='company-delete' title='LLL:contact.ext.company.delete'}
			{/if}
			{Button label='contact.ext.company.close' onclick='Todoyu.Ext.contact.Company.showList(Todoyu.Ext.contact.PanelWidget.ContactSearch.getValue())' class='cancel' id='company-close' title='LLL:contact.ext.company.close'}
		</div>
		<div class="clear"></div>

	</div>
</div>