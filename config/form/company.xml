<?xml version="1.0" encoding="UTF-8"?>
<form>
	<attributes>
		<attribute name="action">?ext=contact&amp;controller=company</attribute>
		<attribute name="name">company</attribute>
		<attribute name="onsubmit">return false</attribute>
		<attribute name="class">formCompany</attribute>
	</attributes>
	<hiddenFields>
		<field name="id"></field>
	</hiddenFields>
	<fieldsets>
		<fieldset name="main">
			<legend>Main customer data</legend>
			<elements>

				<field type="textinput" name="title">
					<label>user.company.attr.name</label>
					<required />
				</field>

				<field type="textinput" name="shortname">
					<label>user.company.attr.shortname</label>
				</field>

				<field type="dateinput" name="date_enter">
					<label>user.company.attr.date_enter</label>
				</field>

				<field type="checkbox" name="is_ngo">
					<label>user.company.attr.is_ngo</label>
				</field>

				<field type="checkbox" name="is_internal">
					<label>user.company.attr.is_internal</label>
				</field>

				<field type="expandAllButton" name="expandAll">
					<fields>contactinfo,address,user</fields>
				</field>

				<field type="databaseRelation" name="contactinfo">
					<label>user.company.attr.contactinfo</label>
					<foreignRecordConf>
						<foreignformxml>ext/contact/config/form/contactinfo.xml</foreignformxml>
						<addSubformConfig>
							<ext>contact</ext>
							<controller>formhandling</controller>
						</addSubformConfig>
						<label type="function">
							<function>TodoyuContactViewHelper::getContactinfoLabel</function>
							<noLabel>LLL:contact.noLabel.newContactInfo</noLabel>
						</label>
					</foreignRecordConf>
				</field>

				<field type="databaseRelation" name="address">
					<label>user.company.attr.address</label>
					<foreignRecordConf>
						<foreignformxml>ext/contact/config/form/address.xml</foreignformxml>
						<addSubformConfig>
							<ext>contact</ext>
							<controller>formhandling</controller>
						</addSubformConfig>
						<label type="function">
							<function>TodoyuContactViewHelper::getAddressLabel</function>
							<noLabel>LLL:contact.noLabel.newAddress</noLabel>
						</label>
					</foreignRecordConf>
				</field>

				<field type="databaseRelation" name="user">
					<label>user.company.attr.user</label>
					<foreignRecordConf>
						<foreignformxml>ext/contact/config/form/company-user.xml</foreignformxml>
						<addSubformConfig>
							<ext>contact</ext>
							<controller>company</controller>
						</addSubformConfig>
						<label type="function">
							<function>TodoyuContactViewHelper::getEmployeeLabel</function>
							<noLabel>LLL:contact.noLabel.newEmployee</noLabel>
						</label>
					</foreignRecordConf>
				</field>

			</elements>
		</fieldset>

		<fieldset name="buttons">
			<legend>Actions</legend>
			<class>buttons</class>
			<elements>
				<field type="saveButton" name="save">
					<onclick>Todoyu.Ext.contact.Company.save(this.form)</onclick>
				</field>
				<field type="cancelButton" name="cancel">
					<onclick>Todoyu.Ext.contact.Company.closeForm()</onclick>
				</field>
			</elements>
		</fieldset>

	</fieldsets>
</form>