<?xml version="1.0" encoding="UTF-8"?>
<form>
	<attributes>
		<attribute name="action">?ext=contact&amp;controller=person</attribute>
		<attribute name="name">person</attribute>
		<attribute name="onsubmit">return Todoyu.Ext.contact.Person.save(this)</attribute>
		<attribute name="class">formPerson</attribute>
	</attributes>
	<hiddenFields>
		<field name="id"/>
	</hiddenFields>
	<fieldsets>
		<fieldset name="main">
			<legend>Main user data</legend>
			<elements>
				
				<field type="select" name="gender">
					<label>LLL:user.user.attr.gender</label>
					<source type="list">
						<option>
							<value>m</value>
							<label>LLL:user.user.attr.gender.m</label>
						</option>
						<option>
							<value>w</value>
							<label>LLL:user.user.attr.gender.f</label>
						</option>
					</source>
				</field>

				<field type="select" name="type">
					<label>LLL:user.user.attr.type</label>
					<source type="function">
						<function>TodoyuContactViewHelper::getUserTypeOptions</function>
					</source>
				</field>

				<field type="textinput" name="lastname">
					<label>LLL:user.user.attr.lastname</label>
					<required/>
				</field>

				<field type="textinput" name="firstname">
					<label>LLL:user.user.attr.firstname</label>
					<required>1</required>
				</field>

				<field type="textinput" name="shortname">
					<label>LLL:user.user.attr.shortname</label>
				</field>

				<field type="dateinput" name="birthday">
					<label>LLL:user.user.attr.birthday</label>
					<calendar>
						<range>[1940,2020]</range>
					</calendar>
				</field>

				<field type="button" name="expandall">
					<type>button</type>
					<text>LLL:core.expandall</text>
					<onclick>Todoyu.Form.expandAllForeignRecords(this.id);</onclick>
					<class/>
				</field>

				<field type="databaseRelation" name="contactinfo">
					<label>LLL:user.user.attr.contactinfo</label>
					<foreignRecordConf>
						<foreignformxml>ext/contact/config/form/contactinfo.xml</foreignformxml>
						<addSubformConfig>
							<ext>contact</ext>
							<controller>person</controller>
						</addSubformConfig>
						<label type="function">
							<function>TodoyuContactViewHelper::getContactinfoLabel</function>
							<noLabel>Neue Kontaktinformation</noLabel>
						</label>
					</foreignRecordConf>
				</field>

				<field type="databaseRelation" name="address">
					<label>LLL:user.user.attr.address</label>
					<foreignRecordConf>
						<foreignformxml>ext/contact/config/form/address.xml</foreignformxml>
						<addSubformConfig>
							<ext>contact</ext>
							<controller>formhandling</controller>
						</addSubformConfig>
						<label type="function">
							<function>TodoyuContactViewHelper::getAddressLabel</function>
							<noLabel>Neue Adresse</noLabel>
						</label>
					</foreignRecordConf>
				</field>

				<field type="databaseRelation" name="customer">
					<label>LLL:user.user.attr.customer</label>
					<foreignRecordConf>
						<foreignformxml>ext/contact/config/form/user-company.xml</foreignformxml>
						<addSubformConfig>
							<ext>contact</ext>
							<controller>person</controller>
						</addSubformConfig>
						<label type="function">
							<function>TodoyuContactViewHelper::getCustomerLabel</function>
							<noLabel>Neuer Arbeitgeber</noLabel>
						</label>
					</foreignRecordConf>
				</field>
				
			</elements>
		</fieldset>
		
		<fieldset name="buttons">
			<legend>Actions</legend>
			<class>buttons</class>
			<elements>
				
				<field type="button" name="save">
					<type>submit</type>
					<text>LLL:form.field.save</text>
					<class>buttonSave</class>
					<hasIcon>1</hasIcon>
				</field>
				
				<field type="button" name="cancel">
					<text>LLL:form.field.cancel</text>
					<type>button</type>
					<class>buttonCancel</class>
					<hasIcon>1</hasIcon>
					<onclick>Todoyu.Ext.contact.closeForm()</onclick>
				</field>
				
			</elements>
		</fieldset>
		
	</fieldsets>
</form>
